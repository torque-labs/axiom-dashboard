<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard Anti-Gaming Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-card: #16202a;
            --border: #2f3336;
            --text-primary: #e7e9ea;
            --text-secondary: #71767b;
            --red: #f4212e;
            --green: #00ba7c;
            --blue: #1d9bf0;
            --purple: #7c3aed;
            --yellow: #fbbf24;
            --orange: #f97316;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 24px;
            line-height: 1.5;
        }
        .container { max-width: 1400px; margin: 0 auto; }

        h1 { font-size: 28px; font-weight: 700; margin-bottom: 4px; }
        .subtitle { color: var(--text-secondary); margin-bottom: 32px; }

        .recommendation {
            background: linear-gradient(135deg, #1d4ed8 0%, #7c3aed 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
        }
        .recommendation h2 { font-size: 18px; margin-bottom: 8px; }
        .recommendation p { opacity: 0.9; font-size: 14px; }

        .metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }
        @media (max-width: 800px) {
            .metrics { grid-template-columns: repeat(2, 1fr); }
        }
        .metric {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        .metric-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        .metric-value {
            font-size: 28px;
            font-weight: 700;
        }
        .metric-value.red { color: var(--red); }
        .metric-value.green { color: var(--green); }

        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
            width: 100%;
        }

        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }
        @media (max-width: 900px) {
            .two-col { grid-template-columns: 1fr; }
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        td { font-size: 14px; }
        tr:hover { background: rgba(255,255,255,0.02); }

        .wallet-cell {
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
        }
        .wallet-cell.suspect { color: var(--orange); }
        .wallet-cell.legit { color: var(--blue); }

        .num {
            text-align: right;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
        }
        .num.drop { color: var(--red); }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .badge.suspect { background: rgba(249,115,22,0.15); color: var(--orange); }
        .badge.legit { background: rgba(0,186,124,0.15); color: var(--green); }

        .change {
            font-size: 11px;
            margin-left: 4px;
        }
        .change.negative { color: var(--red); }
        .change.positive { color: var(--green); }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 16px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }
        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }

        .suspicious-activity {
            background: rgba(249,115,22,0.1);
            border: 1px solid var(--orange);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            font-size: 13px;
        }
        .suspicious-activity strong { color: var(--orange); }
    </style>
</head>
<body>
    <div class="container">
        <h1>Leaderboard Anti-Gaming Analysis</h1>
        <p class="subtitle">Analysis Period: January 19-25, 2026</p>

        <div class="recommendation">
            <h2>Recommendation: 15-Minute Hold | $2,000 Volume | 10 Unique Traders</h2>
            <p>This configuration reduces suspected gaming PNL by 88% while preserving legitimate trader rankings. Legitimate traders see an average +9% improvement due to removal of gaming activity.</p>
        </div>

        <div class="metrics">
            <div class="metric">
                <div class="metric-label">Suspected Gaming Wallets</div>
                <div class="metric-value">3</div>
            </div>
            <div class="metric">
                <div class="metric-label">Suspected Gaming PNL</div>
                <div class="metric-value red">$54.3k</div>
            </div>
            <div class="metric">
                <div class="metric-label">PNL Reduction</div>
                <div class="metric-value red">-88%</div>
            </div>
            <div class="metric">
                <div class="metric-label">Legit Trader Impact</div>
                <div class="metric-value green">+9%</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Suspicious Activity Identified</div>
            <div class="suspicious-activity">
                <strong>5CWn9gFt ↔ JCLqyRAz:</strong> 39 shared tokens, 373 trades, avg 0.1 seconds apart<br>
                <strong>CyaE1Vxv ↔ JCLqyRAz:</strong> 14 shared tokens, 10 within 5 minutes<br>
                <strong>CyaE1Vxv ↔ 5CWn9gFt:</strong> 14 shared tokens, 10 within 5 minutes<br><br>
                <em>Pattern consistent with bot behavior, though coordination cannot be confirmed.</em>
            </div>
        </div>

        <div class="two-col">
            <div class="section">
                <div class="section-title">Current Leaderboard (No Filters)</div>
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Wallet</th>
                            <th class="num">PNL</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="currentTable"></tbody>
                </table>
            </div>
            <div class="section">
                <div class="section-title">New Leaderboard (15m / $2k / 10T)</div>
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Wallet</th>
                            <th class="num">PNL</th>
                            <th>Change</th>
                        </tr>
                    </thead>
                    <tbody id="newTable"></tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Suspected Gaming vs Legitimate Trader Impact</div>
            <div class="chart-wrapper">
                <canvas id="impactChart"></canvas>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Scenarios Tested</div>
            <div class="legend">
                <div class="legend-item"><div class="legend-dot" style="background: var(--red)"></div> Baseline</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--yellow)"></div> 15m/$2k/10T</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--green)"></div> 15m/$2k/20T</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--purple)"></div> 20m/$3k/30T</div>
            </div>
            <div class="chart-wrapper">
                <canvas id="scenarioChart"></canvas>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Impact on Suspected Gaming Wallets</div>
            <table>
                <thead>
                    <tr>
                        <th>Wallet</th>
                        <th class="num">Baseline PNL</th>
                        <th class="num">After Filters</th>
                        <th class="num">Reduction</th>
                    </tr>
                </thead>
                <tbody id="sniperTable"></tbody>
            </table>
        </div>
    </div>

    <script>
        // Current leaderboard (baseline)
        const currentData = [
            { rank: 1, wallet: "CyaE1Vxv", pnl: 37345, status: "suspect" },
            { rank: 2, wallet: "6pkPgzD8", pnl: 18229, status: "legit" },
            { rank: 3, wallet: "CA4keXLt", pnl: 13922, status: "legit" },
            { rank: 4, wallet: "HYSq1KBA", pnl: 11942, status: "legit" },
            { rank: 5, wallet: "4NtyFqqR", pnl: 11568, status: "legit" },
            { rank: 6, wallet: "ExggwHcH", pnl: 10356, status: "legit" },
            { rank: 7, wallet: "5CWn9gFt", pnl: 9767, status: "suspect" },
            { rank: 8, wallet: "BTZJRdcc", pnl: 9326, status: "legit" },
            { rank: 9, wallet: "TimeAdRp", pnl: 8442, status: "legit" },
            { rank: 10, wallet: "4QodqLUi", pnl: 7894, status: "legit" }
        ];

        // New leaderboard (15m / $2k / 10T)
        const newData = [
            { rank: 1, wallet: "6pkPgzD8", pnl: 19327, prevRank: 2 },
            { rank: 2, wallet: "HYSq1KBA", pnl: 13009, prevRank: 4 },
            { rank: 3, wallet: "CA4keXLt", pnl: 11751, prevRank: 3 },
            { rank: 4, wallet: "TimeAdRp", pnl: 11566, prevRank: 9 },
            { rank: 5, wallet: "4NtyFqqR", pnl: 11197, prevRank: 5 },
            { rank: 6, wallet: "ExggwHcH", pnl: 10356, prevRank: 6 },
            { rank: 7, wallet: "BTZJRdcc", pnl: 9306, prevRank: 8 },
            { rank: 8, wallet: "4QodqLUi", pnl: 7985, prevRank: 10 },
            { rank: 9, wallet: "5B79fMkc", pnl: 6970, prevRank: null },
            { rank: 10, wallet: "8pKVAVuG", pnl: 6745, prevRank: null }
        ];

        // Suspected gaming wallets
        const sniperData = [
            { wallet: "CyaE1Vxv", baseline: 37345, after: 6549, reduction: -82 },
            { wallet: "5CWn9gFt", baseline: 9767, after: 134, reduction: -99 },
            { wallet: "JCLqyRAz", baseline: 7195, after: 75, reduction: -99 }
        ];

        // Scenario comparison data
        const scenarioData = [
            { wallet: "CyaE1Vxv", baseline: 37345, s15_2k_10t: 6549, s15_2k_20t: 6549, s20_3k_30t: 6332 },
            { wallet: "6pkPgzD8", baseline: 18229, s15_2k_10t: 19327, s15_2k_20t: 19327, s20_3k_30t: 19327 },
            { wallet: "HYSq1KBA", baseline: 11942, s15_2k_10t: 13009, s15_2k_20t: 13009, s20_3k_30t: 13009 },
            { wallet: "5CWn9gFt", baseline: 9767, s15_2k_10t: 134, s15_2k_20t: 134, s20_3k_30t: 134 },
            { wallet: "JCLqyRAz", baseline: 7195, s15_2k_10t: 75, s15_2k_20t: 75, s20_3k_30t: 75 }
        ];

        // Format currency
        const fmt = (n) => '$' + n.toLocaleString();
        const fmtK = (n) => '$' + (n/1000).toFixed(0) + 'k';

        // Populate current leaderboard
        const currentTable = document.getElementById('currentTable');
        currentData.forEach(row => {
            const isSuspect = row.status === 'suspect';
            currentTable.innerHTML += `
                <tr>
                    <td>${row.rank}</td>
                    <td class="wallet-cell ${isSuspect ? 'suspect' : 'legit'}">${row.wallet}...</td>
                    <td class="num">${fmt(row.pnl)}</td>
                    <td><span class="badge ${isSuspect ? 'suspect' : 'legit'}">${isSuspect ? 'Suspect' : 'Legit'}</span></td>
                </tr>
            `;
        });

        // Populate new leaderboard
        const newTable = document.getElementById('newTable');
        newData.forEach(row => {
            let change = '';
            if (row.prevRank === null) {
                change = '<span class="change positive">NEW</span>';
            } else if (row.prevRank > row.rank) {
                change = `<span class="change positive">↑ from #${row.prevRank}</span>`;
            } else if (row.prevRank < row.rank) {
                change = `<span class="change negative">↓ from #${row.prevRank}</span>`;
            } else {
                change = '—';
            }
            newTable.innerHTML += `
                <tr>
                    <td>${row.rank}</td>
                    <td class="wallet-cell legit">${row.wallet}...</td>
                    <td class="num">${fmt(row.pnl)}</td>
                    <td>${change}</td>
                </tr>
            `;
        });

        // Populate sniper impact table
        const sniperTable = document.getElementById('sniperTable');
        sniperData.forEach(row => {
            sniperTable.innerHTML += `
                <tr>
                    <td class="wallet-cell suspect">${row.wallet}...</td>
                    <td class="num">${fmt(row.baseline)}</td>
                    <td class="num drop">${fmt(row.after)}</td>
                    <td class="num drop">${row.reduction}%</td>
                </tr>
            `;
        });
        // Add total row
        const totalBaseline = sniperData.reduce((s, d) => s + d.baseline, 0);
        const totalAfter = sniperData.reduce((s, d) => s + d.after, 0);
        const totalReduction = Math.round((totalAfter - totalBaseline) / totalBaseline * 100);
        sniperTable.innerHTML += `
            <tr style="font-weight: bold; border-top: 2px solid var(--border);">
                <td>TOTAL</td>
                <td class="num">${fmt(totalBaseline)}</td>
                <td class="num drop">${fmt(totalAfter)}</td>
                <td class="num drop">${totalReduction}%</td>
            </tr>
        `;

        // Chart defaults
        Chart.defaults.color = '#71767b';
        Chart.defaults.borderColor = '#2f3336';

        // Impact Chart
        const suspectBefore = sniperData.reduce((s, d) => s + d.baseline, 0);
        const suspectAfter = sniperData.reduce((s, d) => s + d.after, 0);
        const legitBefore = currentData.filter(d => d.status === 'legit').reduce((s, d) => s + d.pnl, 0);
        const legitAfter = newData.slice(0, 8).reduce((s, d) => s + d.pnl, 0); // top 8 legit

        new Chart(document.getElementById('impactChart'), {
            type: 'bar',
            data: {
                labels: ['Suspected Gaming (3 wallets)', 'Legitimate Traders (Top 8)'],
                datasets: [
                    { label: 'Before Filters', data: [suspectBefore, legitBefore], backgroundColor: '#f4212e', borderRadius: 6 },
                    { label: 'After Filters', data: [suspectAfter, legitAfter], backgroundColor: '#00ba7c', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
                },
                scales: {
                    x: {
                        grid: { color: '#2f3336' },
                        ticks: { callback: v => fmtK(v) }
                    },
                    y: { grid: { display: false } }
                }
            }
        });

        // Scenario Chart
        new Chart(document.getElementById('scenarioChart'), {
            type: 'bar',
            data: {
                labels: scenarioData.map(d => d.wallet),
                datasets: [
                    { label: 'Baseline', data: scenarioData.map(d => d.baseline), backgroundColor: '#f4212e', borderRadius: 4 },
                    { label: '15m/$2k/10T', data: scenarioData.map(d => d.s15_2k_10t), backgroundColor: '#fbbf24', borderRadius: 4 },
                    { label: '15m/$2k/20T', data: scenarioData.map(d => d.s15_2k_20t), backgroundColor: '#00ba7c', borderRadius: 4 },
                    { label: '20m/$3k/30T', data: scenarioData.map(d => d.s20_3k_30t), backgroundColor: '#7c3aed', borderRadius: 4 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: {
                        grid: { color: '#2f3336' },
                        ticks: { callback: v => fmtK(v) }
                    }
                }
            }
        });
    </script>
</body>
</html>
