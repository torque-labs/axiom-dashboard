<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard Gaming Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-card: #16202a;
            --border: #2f3336;
            --text-primary: #e7e9ea;
            --text-secondary: #71767b;
            --red: #f4212e;
            --green: #00ba7c;
            --blue: #1d9bf0;
            --purple: #7c3aed;
            --yellow: #fbbf24;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 24px;
            line-height: 1.5;
        }
        .container { max-width: 1200px; margin: 0 auto; }

        h1 { font-size: 28px; font-weight: 700; margin-bottom: 4px; }
        .subtitle { color: var(--text-secondary); margin-bottom: 32px; }

        .recommendation {
            background: linear-gradient(135deg, #1d4ed8 0%, #7c3aed 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
        }
        .recommendation h2 { font-size: 18px; margin-bottom: 8px; }
        .recommendation p { opacity: 0.9; font-size: 14px; }

        .metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }
        @media (max-width: 800px) {
            .metrics { grid-template-columns: repeat(2, 1fr); }
        }
        .metric {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }
        .metric-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        .metric-value {
            font-size: 28px;
            font-weight: 700;
        }
        .metric-value.red { color: var(--red); }
        .metric-value.green { color: var(--green); }

        .section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        .section-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .chart-wrapper {
            position: relative;
            height: 350px;
            width: 100%;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        td { font-size: 14px; }
        tr:hover { background: rgba(255,255,255,0.02); }

        .wallet-cell {
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
        }
        .wallet-cell.sniper { color: var(--red); }
        .wallet-cell.stable { color: var(--blue); }

        .num {
            text-align: right;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 13px;
        }
        .num.drop { color: var(--red); }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        .badge.sniper { background: rgba(244,33,46,0.15); color: var(--red); }
        .badge.stable { background: rgba(0,186,124,0.15); color: var(--green); }

        .change {
            font-size: 11px;
            margin-left: 4px;
        }
        .change.negative { color: var(--red); }
        .change.positive { color: var(--green); }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 16px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
        }
        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Leaderboard Gaming Analysis</h1>
        <p class="subtitle">Analysis Period: January 19-25, 2026</p>

        <div class="recommendation">
            <h2>Recommendation: 30-Minute Hold + 10 Unique Traders</h2>
            <p>This combination removes all identified snipers while preserving legitimate trader rankings. Sniper PNL reduced by 93%, stable traders see minimal impact (+2% average).</p>
        </div>

        <div class="metrics">
            <div class="metric">
                <div class="metric-label">Snipers Found</div>
                <div class="metric-value">3</div>
            </div>
            <div class="metric">
                <div class="metric-label">Gaming PNL</div>
                <div class="metric-value red">$54.3k</div>
            </div>
            <div class="metric">
                <div class="metric-label">Sniper Reduction</div>
                <div class="metric-value red">-93%</div>
            </div>
            <div class="metric">
                <div class="metric-label">Stable Impact</div>
                <div class="metric-value green">+2%</div>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Sniper vs Stable Trader Impact</div>
            <div class="chart-wrapper">
                <canvas id="impactChart"></canvas>
            </div>
        </div>

        <div class="section">
            <div class="section-title">PNL by Scenario (Top 10 Wallets)</div>
            <div class="legend">
                <div class="legend-item"><div class="legend-dot" style="background: var(--red)"></div> Current</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--yellow)"></div> 30min Hold</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--green)"></div> 30m + 10T</div>
                <div class="legend-item"><div class="legend-dot" style="background: var(--purple)"></div> Combined</div>
            </div>
            <div class="chart-wrapper">
                <canvas id="scenarioChart"></canvas>
            </div>
        </div>

        <div class="section">
            <div class="section-title">Detailed Wallet Analysis</div>
            <table>
                <thead>
                    <tr>
                        <th>Wallet</th>
                        <th>Status</th>
                        <th class="num">Current</th>
                        <th class="num">30min</th>
                        <th class="num">30m+10T</th>
                        <th class="num">Combined</th>
                        <th class="num">Change</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        const data = [
            { wallet: "CyaE1Vxv", current: 37371, hold_30m: 6332, hold_30m_10t: 6332, combined: 3587, status: "sniper" },
            { wallet: "6pkPgzD8", current: 18228, hold_30m: 19590, hold_30m_10t: 19590, combined: 19590, status: "normal" },
            { wallet: "CA4keXLt", current: 13903, hold_30m: 11751, hold_30m_10t: 11751, combined: 11751, status: "normal" },
            { wallet: "4NtyFqqR", current: 11568, hold_30m: 11197, hold_30m_10t: 11197, combined: 5339, status: "normal" },
            { wallet: "ExggwHcH", current: 10356, hold_30m: 10356, hold_30m_10t: 10356, combined: 10238, status: "normal" },
            { wallet: "5CWn9gFt", current: 9812, hold_30m: 134, hold_30m_10t: 134, combined: 100, status: "sniper" },
            { wallet: "HYSq1KBA", current: 9746, hold_30m: 10807, hold_30m_10t: 10807, combined: 10807, status: "normal" },
            { wallet: "BTZJRdcc", current: 9353, hold_30m: 9176, hold_30m_10t: 9176, combined: 9193, status: "normal" },
            { wallet: "TimeAdRp", current: 8442, hold_30m: 11566, hold_30m_10t: 11566, combined: 5726, status: "normal" },
            { wallet: "4QodqLUi", current: 7894, hold_30m: 7985, hold_30m_10t: 7985, combined: 7985, status: "normal" },
            { wallet: "JCLqyRAz", current: 7165, hold_30m: 75, hold_30m_10t: 75, combined: 37, status: "sniper" },
            { wallet: "8pKVAVuG", current: 6674, hold_30m: 6745, hold_30m_10t: 6745, combined: 5218, status: "normal" },
            { wallet: "5B79fMkc", current: 6562, hold_30m: 6970, hold_30m_10t: 6970, combined: 6460, status: "normal" },
            { wallet: "FcBdvzv2", current: 6111, hold_30m: 6451, hold_30m_10t: 6451, combined: 5568, status: "normal" }
        ];

        // Format currency
        const fmt = (n) => '$' + n.toLocaleString();
        const fmtK = (n) => '$' + (n/1000).toFixed(0) + 'k';

        // Populate table
        const tbody = document.getElementById('tableBody');
        data.forEach(row => {
            const change = ((row.combined - row.current) / row.current * 100).toFixed(0);
            const isSniper = row.status === 'sniper';
            const isDrop = row.combined < row.current * 0.5;

            tbody.innerHTML += `
                <tr>
                    <td class="wallet-cell ${isSniper ? 'sniper' : 'stable'}">${row.wallet}...</td>
                    <td><span class="badge ${isSniper ? 'sniper' : 'stable'}">${isSniper ? 'Sniper' : 'Stable'}</span></td>
                    <td class="num">${fmt(row.current)}</td>
                    <td class="num ${isDrop ? 'drop' : ''}">${fmt(row.hold_30m)}</td>
                    <td class="num ${isDrop ? 'drop' : ''}">${fmt(row.hold_30m_10t)}</td>
                    <td class="num ${isDrop ? 'drop' : ''}">${fmt(row.combined)}</td>
                    <td class="num"><span class="change ${change >= 0 ? 'positive' : 'negative'}">${change >= 0 ? '+' : ''}${change}%</span></td>
                </tr>
            `;
        });

        // Chart defaults
        Chart.defaults.color = '#71767b';
        Chart.defaults.borderColor = '#2f3336';

        // Impact Chart
        const snipers = data.filter(d => d.status === 'sniper');
        const stable = data.filter(d => d.status === 'normal');
        const sniperBefore = snipers.reduce((s, d) => s + d.current, 0);
        const sniperAfter = snipers.reduce((s, d) => s + d.combined, 0);
        const stableBefore = stable.reduce((s, d) => s + d.current, 0);
        const stableAfter = stable.reduce((s, d) => s + d.combined, 0);

        new Chart(document.getElementById('impactChart'), {
            type: 'bar',
            data: {
                labels: ['Snipers (3 wallets)', 'Stable Traders (11 wallets)'],
                datasets: [
                    { label: 'Before', data: [sniperBefore, stableBefore], backgroundColor: '#f4212e', borderRadius: 6 },
                    { label: 'After Rules', data: [sniperAfter, stableAfter], backgroundColor: '#00ba7c', borderRadius: 6 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
                },
                scales: {
                    x: {
                        grid: { color: '#2f3336' },
                        ticks: { callback: v => fmtK(v) }
                    },
                    y: { grid: { display: false } }
                }
            }
        });

        // Scenario Chart (top 10 only)
        const top10 = data.slice(0, 10);
        new Chart(document.getElementById('scenarioChart'), {
            type: 'bar',
            data: {
                labels: top10.map(d => d.wallet),
                datasets: [
                    { label: 'Current', data: top10.map(d => d.current), backgroundColor: '#f4212e', borderRadius: 4 },
                    { label: '30min', data: top10.map(d => d.hold_30m), backgroundColor: '#fbbf24', borderRadius: 4 },
                    { label: '30m+10T', data: top10.map(d => d.hold_30m_10t), backgroundColor: '#00ba7c', borderRadius: 4 },
                    { label: 'Combined', data: top10.map(d => d.combined), backgroundColor: '#7c3aed', borderRadius: 4 }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: {
                        grid: { color: '#2f3336' },
                        ticks: { callback: v => fmtK(v) }
                    }
                }
            }
        });
    </script>
</body>
</html>
